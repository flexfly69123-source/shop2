<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>Cursor Store</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Используем стандартные системные шрифты (они не требуют загрузки) */
        body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif; background: #000; color: white; height: 100vh; overflow: hidden; margin: 0; }
        
        /* Включаем аппаратное ускорение для плавности */
        .app-shell { transform: translateZ(0); width: 100%; max-width: 500px; height: 100%; background: #050505; display: flex; flex-direction: column; margin: 0 auto; position: relative; }
        
        .product-card { 
            background: #121214; 
            border: 1px solid rgba(255,255,255,0.08); 
            border-radius: 20px; 
            padding: 12px;
            will-change: transform;
        }

        .img-container {
            width: 100%; height: 100px; border-radius: 12px; margin-bottom: 8px;
            overflow: hidden; display: flex; align-items: center; justify-content: center;
            background: #1c1c21;
        }
        
        /* Сжатые картинки для скорости */
        .img-container img { width: 60%; height: 60%; object-fit: contain; }
        .pepe-img { width: 100% !important; height: 100% !important; object-fit: cover !important; }

        nav { position: absolute; bottom: 0; width: 100%; height: 75px; background: rgba(10, 10, 10, 0.95); backdrop-filter: blur(10px); border-top: 1px solid rgba(255,255,255,0.1); display: flex; justify-content: space-around; align-items: center; padding-bottom: 15px; }
        
        .section { display: none; opacity: 0; }
        .section.active { display: block; opacity: 1; }
        
        /* Убираем тяжелые тени для старых телефонов */
        .filter-btn { background: #18181b; color: #a1a1aa; padding: 8px 16px; border-radius: 10px; font-size: 12px; font-weight: 600; }
        .filter-btn.active { background: #3b82f6; color: white; }
    </style>
</head>
<body>
    <div class="app-shell">
        <header class="h-[55px] flex items-center justify-end px-5 border-b border-white/5">
            <div class="bg-blue-500/10 border border-blue-500/30 px-3 py-1 rounded-full text-blue-400 text-xs font-bold">1,240 ⭐️</div>
        </header>

        <main class="flex-1 overflow-y-auto p-4 pb-24">
            <div id="catalog" class="section active">
                <h1 class="text-xl font-bold mb-4">Магазин</h1>
                <div class="grid grid-cols-2 gap-3">
                    <div class="product-card" onclick="buy('50 Stars')">
                        <div class="img-container">
                            <img src="https://img.icons8.com/fluency/96/star--v1.png" alt="Stars">
                        </div>
                        <div class="font-bold text-xs">50 Stars</div>
                        <div class="text-blue-500 font-bold text-sm">$1.50</div>
                    </div>
                    <div class="product-card" onclick="buy('Premium')">
                        <div class="img-container">
                            <img src="https://img.icons8.com/fluency/96/telegram-app.png" alt="Premium">
                        </div>
                        <div class="font-bold text-xs">Premium 1M</div>
                        <div class="text-blue-500 font-bold text-sm">$4.99</div>
                    </div>
                    <div class="product-card" onclick="buy('Pepe NFT')">
                        <div class="img-container">
                            <img class="pepe-img" src="https://i.ibb.co/v4m3S3v/pepe-nft.jpg" alt="Pepe">
                        </div>
                        <div class="font-bold text-xs">Pepe Gift</div>
                        <div class="text-blue-500 font-bold text-sm">$15.00</div>
                    </div>
                </div>
            </div>

            <div id="profile" class="section">
                <h1 class="text-xl font-bold mb-4">Профиль</h1>
                <div class="product-card flex items-center gap-3 mb-4">
                    <div class="w-12 h-12 bg-blue-600 rounded-xl flex items-center justify-center font-bold" id="u-icon">?</div>
                    <div>
                        <div class="font-bold text-sm" id="u-name">User</div>
                        <div class="text-[10px] text-zinc-500" id="u-id">ID: 000</div>
                    </div>
                </div>
                <button id="admin-panel" class="hidden w-full bg-orange-600 h-12 rounded-xl font-bold text-xs mb-3" onclick="tg.showAlert('Админ-мод')">АДМИНКА</button>
            </div>
        </main>

        <nav>
            <div onclick="openTab('catalog', this)" class="nav-link active text-[10px]">МАГАЗИН</div>
            <div onclick="openTab('profile', this)" class="nav-link text-[10px]">ПРОФИЛЬ</div>
        </nav>
    </div>

    <script>
        const tg = window.Telegram.WebApp;
        tg.ready();
        tg.expand();

        const ADMIN_ID = 2076467636; // ТВОЙ ID

        const user = tg.initDataUnsafe?.user || { first_name: "User", id: 0 };
        document.getElementById('u-name').innerText = user.first_name;
        document.getElementById('u-id').innerText = "ID: " + user.id;
        document.getElementById('u-icon').innerText = user.first_name.charAt(0).toUpperCase();

        if (user.id === ADMIN_ID) document.getElementById('admin-panel').classList.remove('hidden');

        function openTab(id, el) {
            document.querySelectorAll('.nav-link').forEach(n => n.classList.remove('active'));
            el.classList.add('active');
            document.querySelectorAll('.section').forEach(s => {
                s.classList.remove('active');
                s.style.opacity = "0";
            });
            const activeSec = document.getElementById(id);
            activeSec.classList.add('active');
            setTimeout(() => activeSec.style.opacity = "1", 10);
            tg.HapticFeedback.impactOccurred('light');
        }

        function buy(name) {
            tg.showConfirm("Купить " + name + "?", (ok) => {
                if(ok) tg.sendData(JSON.stringify({item: name}));
            });
        }
    </script>
</body>
</html>
